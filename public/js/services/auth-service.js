function a5_0x440c(){const _0x1f3e39=['Authorization','data','checkEmailExists','scheduleNextTokenRefresh','login','register','logout','href','Đã\x20xảy\x20ra\x20lỗi\x20từ\x20refresh\x20token\x20API','3MRpyBB','refreshToken','classList','error','message','email','/api/check-email','redirect','POST','getItem','385575oLFsJX','Refresh\x20token\x20không\x20hợp\x20lệ\x20hoặc\x20đã\x20hết\x20hạn.','7480644wxjQTX','log','location','status','580dWIzFl','36153ShtCeR','57176vmAIPF','refreshTimeoutId','/api/logout','resetPassword','805KhcOUW','Token\x20refreshed.\x20Retrying\x20the\x20original\x20request...','stopTokenRefreshTimer','9404109heNDMk','Bearer\x20','7311HNRXQu','4013264NEQhTz','prototype','post','expires_in','defineProperty','access_token','clearError','/login','Lấy\x20token\x20thất\x20bại.\x20Đăng\x20xuất.','finally','displayError','exports','/api/activate','/api/refresh-token','+84','414YkkhHa','append','checkPhoneNumberExists','startsWith','isPhone','headers','remove','accessToken','/api/register','removeItem','setItem','json','set','exists','success','/api/forgot-password','then','textContent','add','validateEmail','refreshTokenPromise','token_expires_at','activateAccount','hidden','test','forgotPassword','Lỗi\x20khi\x20gọi\x20API\x20logout:','now','/api/check-phone-number'];a5_0x440c=function(){return _0x1f3e39;};return a5_0x440c();}function a5_0xfd66(_0x5d99dd,_0x59ec51){const _0x440c77=a5_0x440c();return a5_0xfd66=function(_0xfd6624,_0x3d7818){_0xfd6624=_0xfd6624-0x143;let _0x431ad7=_0x440c77[_0xfd6624];return _0x431ad7;},a5_0xfd66(_0x5d99dd,_0x59ec51);}(function(_0x25ab50,_0x386e96){const _0x4a0a92=a5_0xfd66,_0x5182aa=_0x25ab50();while(!![]){try{const _0x5d9228=parseInt(_0x4a0a92(0x163))/0x1*(parseInt(_0x4a0a92(0x173))/0x2)+-parseInt(_0x4a0a92(0x148))/0x3*(-parseInt(_0x4a0a92(0x164))/0x4)+-parseInt(_0x4a0a92(0x152))/0x5+-parseInt(_0x4a0a92(0x154))/0x6+-parseInt(_0x4a0a92(0x15e))/0x7*(-parseInt(_0x4a0a92(0x15a))/0x8)+-parseInt(_0x4a0a92(0x159))/0x9*(parseInt(_0x4a0a92(0x158))/0xa)+-parseInt(_0x4a0a92(0x161))/0xb;if(_0x5d9228===_0x386e96)break;else _0x5182aa['push'](_0x5182aa['shift']());}catch(_0x1b402d){_0x5182aa['push'](_0x5182aa['shift']());}}}(a5_0x440c,0xe2454),((()=>{'use strict';const _0x47c8bd=a5_0xfd66;var _0x141cdd={0x31:(_0x472322,_0x39f6a7,_0x10cf31)=>{const _0x46284f=a5_0xfd66;_0x10cf31['d'](_0x39f6a7,{'M':()=>_0x4503d2});var _0x1bdbfc=_0x10cf31(0x1ae);class _0x4503d2{static[_0x46284f(0x186)](_0x2e11ba){const _0x4c7b35=_0x46284f;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/[_0x4c7b35(0x18b)](_0x2e11ba);}static[_0x46284f(0x177)](_0x46dca5){const _0x303ac0=_0x46284f;let _0x3b0897=_0x46dca5['replace'](/[^0-9+]/g,'');return _0x3b0897[_0x303ac0(0x176)](_0x303ac0(0x172))&&(_0x3b0897='0'+_0x3b0897['slice'](0x3)),/^(0)(3[2-9]|5[689]|7[06-9]|8[1-689]|9[0-46-9])[0-9]{7}$/[_0x303ac0(0x18b)](_0x3b0897);}static[_0x46284f(0x16e)](_0x551dd2,_0x519a3a){const _0x89c607=_0x46284f,_0x4622aa=document['querySelector']('.error-log[data-field=\x22'+_0x551dd2+'\x22]');_0x4622aa&&(''===_0x519a3a?_0x4622aa['classList'][_0x89c607(0x185)](_0x89c607(0x18a)):_0x4622aa[_0x89c607(0x14a)][_0x89c607(0x179)](_0x89c607(0x18a)),_0x4622aa[_0x89c607(0x184)]=_0x519a3a);}static[_0x46284f(0x16a)](_0x42dfae){this['displayError'](_0x42dfae,'');}static[_0x46284f(0x14f)](_0x3588a2=''){const _0x22e51d=_0x46284f;window[_0x22e51d(0x156)][_0x22e51d(0x146)]=''+_0x1bdbfc['c']+_0x3588a2;}}},0x1ae:(_0x59f1c2,_0x59aac2,_0x2e22be)=>{_0x2e22be['d'](_0x59aac2,{'c':()=>_0x1516c8});const _0x1516c8='https://fluffy-telegram-r79rvrrrr4h6gw-80.app.github.dev/doan-phpcoban';}},_0x1e5c47={};function _0x4de72e(_0x4ea5d7){const _0x2a3e96=a5_0xfd66;var _0x6b4c14=_0x1e5c47[_0x4ea5d7];if(void 0x0!==_0x6b4c14)return _0x6b4c14[_0x2a3e96(0x16f)];var _0x31d283=_0x1e5c47[_0x4ea5d7]={'exports':{}};return _0x141cdd[_0x4ea5d7](_0x31d283,_0x31d283[_0x2a3e96(0x16f)],_0x4de72e),_0x31d283[_0x2a3e96(0x16f)];}_0x4de72e['d']=(_0x6ced47,_0x240fbe)=>{const _0x423be0=a5_0xfd66;for(var _0x4b0aff in _0x240fbe)_0x4de72e['o'](_0x240fbe,_0x4b0aff)&&!_0x4de72e['o'](_0x6ced47,_0x4b0aff)&&Object[_0x423be0(0x168)](_0x6ced47,_0x4b0aff,{'enumerable':!0x0,'get':_0x240fbe[_0x4b0aff]});},_0x4de72e['o']=(_0x1cd61e,_0x4229ec)=>Object[_0x47c8bd(0x165)]['hasOwnProperty']['call'](_0x1cd61e,_0x4229ec);var _0x140dd3=_0x4de72e(0x1ae),_0x136dab=_0x4de72e(0x31);new class{['accessToken']=null;[_0x47c8bd(0x187)]=null;['refreshTimeoutId']=null;constructor(){const _0x588525=_0x47c8bd;this[_0x588525(0x17a)]=localStorage[_0x588525(0x151)](_0x588525(0x169)),this['scheduleNextTokenRefresh']();}async[_0x47c8bd(0x192)](_0x3bc501){const _0x1c7bbc=_0x47c8bd,_0x1e2528=new FormData();_0x1e2528[_0x1c7bbc(0x174)](_0x1c7bbc(0x14d),_0x3bc501);const _0x5189b6=_0x140dd3['c']+_0x1c7bbc(0x14e);try{const _0x56736e=await fetch(_0x5189b6,{'method':_0x1c7bbc(0x166),'body':_0x1e2528})[_0x1c7bbc(0x183)](_0x241028=>_0x241028[_0x1c7bbc(0x17e)]());return!!_0x56736e[_0x1c7bbc(0x181)]&&_0x56736e['data'][_0x1c7bbc(0x180)];}catch(_0x1b7a41){console[_0x1c7bbc(0x14b)](_0x1b7a41);}}async[_0x47c8bd(0x175)](_0x4fae4a){const _0x1d857c=_0x47c8bd,_0x4b1ebe=new FormData();_0x4b1ebe[_0x1d857c(0x174)]('phone_number',_0x4fae4a);const _0x2c22a5=_0x140dd3['c']+_0x1d857c(0x18f);try{const _0xa7456d=await fetch(_0x2c22a5,{'method':_0x1d857c(0x166),'body':_0x4b1ebe})[_0x1d857c(0x183)](_0x5f1e34=>_0x5f1e34[_0x1d857c(0x17e)]());return!!_0xa7456d['success']&&_0xa7456d[_0x1d857c(0x191)][_0x1d857c(0x180)];}catch(_0x2a9f4a){console[_0x1d857c(0x14b)](_0x2a9f4a);}}['isLoggedIn'](){const _0xc81bb0=_0x47c8bd;return null!==this[_0xc81bb0(0x17a)];}async[_0x47c8bd(0x144)](_0x51bf46){const _0x309a6d=_0x47c8bd,_0x4e8ea9=_0x140dd3['c']+_0x309a6d(0x17b);return await fetch(_0x4e8ea9,{'method':_0x309a6d(0x166),'body':_0x51bf46})[_0x309a6d(0x183)](_0x40e188=>_0x40e188[_0x309a6d(0x17e)]());}async[_0x47c8bd(0x189)](_0x19d9a5){const _0x214258=_0x47c8bd,_0x3914c5=_0x140dd3['c']+_0x214258(0x170);return await fetch(_0x3914c5,{'method':_0x214258(0x166),'body':_0x19d9a5})['then'](_0x455719=>_0x455719[_0x214258(0x17e)]());}async[_0x47c8bd(0x143)](_0x1c82a5){const _0x2fc2dd=_0x47c8bd,_0x28554b=_0x140dd3['c']+'/api/login',_0x923dbf=await fetch(_0x28554b,{'method':_0x2fc2dd(0x166),'body':_0x1c82a5})[_0x2fc2dd(0x183)](_0x809c33=>_0x809c33['json']());return _0x923dbf['success']&&(this[_0x2fc2dd(0x17a)]=_0x923dbf['data'][_0x2fc2dd(0x169)],localStorage[_0x2fc2dd(0x17d)](_0x2fc2dd(0x169),_0x923dbf[_0x2fc2dd(0x191)]['access_token']),localStorage[_0x2fc2dd(0x17d)](_0x2fc2dd(0x188),String(_0x923dbf[_0x2fc2dd(0x191)][_0x2fc2dd(0x167)]))),_0x923dbf;}async[_0x47c8bd(0x18c)](_0x662639){const _0x156f53=_0x47c8bd,_0x24d8dd=_0x140dd3['c']+_0x156f53(0x182);return await fetch(_0x24d8dd,{'method':'post','body':_0x662639})['then'](_0x25c40c=>_0x25c40c[_0x156f53(0x17e)]());}async[_0x47c8bd(0x15d)](_0x3f3850){const _0x5ac07d=_0x47c8bd,_0x4f60f1=_0x140dd3['c']+'/api/reset-password';return await fetch(_0x4f60f1,{'method':_0x5ac07d(0x166),'body':_0x3f3850})['then'](_0x2d27c0=>_0x2d27c0[_0x5ac07d(0x17e)]());}async['logout'](){const _0x1bf400=_0x47c8bd,_0x4af843=this[_0x1bf400(0x17a)];this[_0x1bf400(0x17a)]=null,this[_0x1bf400(0x160)](),localStorage['removeItem'](_0x1bf400(0x169)),localStorage[_0x1bf400(0x17c)](_0x1bf400(0x188));try{const _0x29e322=_0x140dd3['c']+_0x1bf400(0x15c);await fetch(_0x29e322,{'method':'post','headers':{'Authorization':_0x1bf400(0x162)+_0x4af843}})[_0x1bf400(0x183)](_0x460ab7=>_0x460ab7['json']());}catch(_0x500498){console[_0x1bf400(0x14b)](_0x1bf400(0x18d),_0x500498);}_0x136dab['M'][_0x1bf400(0x14f)](_0x1bf400(0x16b));}async['fetchWithAuth'](_0x25a6a8,_0x31655d={}){const _0x386797=_0x47c8bd,_0x597f51=this[_0x386797(0x17a)],_0x15c845=new Headers(_0x31655d[_0x386797(0x178)]||{});_0x597f51&&_0x15c845[_0x386797(0x17f)](_0x386797(0x190),'Bearer\x20'+_0x597f51),_0x31655d[_0x386797(0x178)]=_0x15c845;let _0x36bc2b=await fetch(_0x25a6a8,_0x31655d);if(0x191===_0x36bc2b[_0x386797(0x157)])try{const _0x1b4d1e=await this[_0x386797(0x149)]();_0x15c845[_0x386797(0x17f)]('Authorization',_0x386797(0x162)+_0x1b4d1e),_0x31655d[_0x386797(0x178)]=_0x15c845,console[_0x386797(0x155)](_0x386797(0x15f)),_0x36bc2b=await fetch(_0x25a6a8,_0x31655d);}catch(_0x53c3d5){console[_0x386797(0x14b)](_0x386797(0x16c),_0x53c3d5),this[_0x386797(0x145)](),_0x136dab['M'][_0x386797(0x14f)](_0x386797(0x16b));}return _0x36bc2b;}async[_0x47c8bd(0x149)](){const _0x428fca=_0x47c8bd;if(!this[_0x428fca(0x187)]){const _0x11bb1d=_0x140dd3['c']+_0x428fca(0x171);this['refreshTokenPromise']=fetch(_0x11bb1d,{'method':_0x428fca(0x150)})[_0x428fca(0x183)](async _0x519b2a=>{const _0x3ef309=_0x428fca;if(!_0x519b2a['ok'])throw new Error(_0x3ef309(0x153));const _0x4815a6=await _0x519b2a[_0x3ef309(0x17e)]();if(_0x4815a6[_0x3ef309(0x181)])return this['accessToken']=_0x4815a6[_0x3ef309(0x191)][_0x3ef309(0x169)],localStorage[_0x3ef309(0x17d)](_0x3ef309(0x169),this[_0x3ef309(0x17a)]),localStorage['setItem']('token_expires_at',String(_0x4815a6[_0x3ef309(0x191)][_0x3ef309(0x167)])),this[_0x3ef309(0x193)](),this['accessToken'];throw new Error(_0x4815a6[_0x3ef309(0x14c)]||_0x3ef309(0x147));})[_0x428fca(0x16d)](()=>{const _0x5d91ee=_0x428fca;this[_0x5d91ee(0x187)]=null;});}return this[_0x428fca(0x187)];}[_0x47c8bd(0x160)](){const _0x1b2263=_0x47c8bd;this[_0x1b2263(0x15b)]&&(clearTimeout(this[_0x1b2263(0x15b)]),this['refreshTimeoutId']=null);}async['scheduleNextTokenRefresh'](){const _0x3a5309=_0x47c8bd;this['stopTokenRefreshTimer']();const _0x475314=localStorage[_0x3a5309(0x151)](_0x3a5309(0x188));if(!_0x475314)return;const _0x46a82f=0x3e8*parseInt(_0x475314,0xa)-Date[_0x3a5309(0x18e)]()-0xea60;if(_0x46a82f>0x0)this[_0x3a5309(0x15b)]=setTimeout(async()=>{const _0x17c84d=_0x3a5309;try{await this[_0x17c84d(0x149)]();}catch(_0x37921a){this[_0x17c84d(0x145)]();}},_0x46a82f);else try{await this[_0x3a5309(0x149)]();}catch(_0x39d7b0){this[_0x3a5309(0x145)]();}}}();})()));