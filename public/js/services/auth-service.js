function a5_0x3600(){const _0x51ea77=['headers','/api/check-email','clearError','3GFhPSD','Authorization','setItem','defineProperty','replace','/api/reset-password','.error-log[data-field=\x22','1mfdZBx','data','email','querySelector','/api/register','displayError','1220062cgWQTI','forgotPassword','removeItem','set','Lấy\x20token\x20thất\x20bại.\x20Đăng\x20xuất.','3360488JBuqMc','post','then','1951453BOXAvJ','/api/login','exports','textContent','https://fluffy-telegram-r79rvrrrr4h6gw-80.app.github.dev/doan-phpcoban','json','/api/activate','/api/logout','resetPassword','1498460bYpyit','token_expires_at','scheduleNextTokenRefresh','error','add','status','stopTokenRefreshTimer','/api/refresh-token','location','classList','refreshToken','logout','register','activateAccount','refreshTimeoutId','redirect','Token\x20refreshed.\x20Retrying\x20the\x20original\x20request...','accessToken','Refresh\x20token\x20không\x20hợp\x20lệ\x20hoặc\x20đã\x20hết\x20hạn.','isPhone','prototype','hidden','/login','login','expires_in','getItem','finally','hasOwnProperty','isLoggedIn','remove','access_token','checkPhoneNumberExists','20PMSBzJ','fetchWithAuth','Lỗi\x20khi\x20gọi\x20API\x20logout:','test','success','message','6724670rtwEJK','1330326voJkWQ','30ZAdGhY','Bearer\x20','/api/forgot-password','8224447mEMRwq','refreshTokenPromise','/api/check-phone-number','slice','Đã\x20xảy\x20ra\x20lỗi\x20từ\x20refresh\x20token\x20API','POST','href','startsWith'];a5_0x3600=function(){return _0x51ea77;};return a5_0x3600();}function a5_0x4136(_0x3c06c6,_0x67b73a){const _0x3600c5=a5_0x3600();return a5_0x4136=function(_0x413627,_0x462e6f){_0x413627=_0x413627-0x7d;let _0x174156=_0x3600c5[_0x413627];return _0x174156;},a5_0x4136(_0x3c06c6,_0x67b73a);}(function(_0x5b1a40,_0xa1dfc5){const _0x310085=a5_0x4136,_0x3e07ec=_0x5b1a40();while(!![]){try{const _0x22391d=parseInt(_0x310085(0xcd))/0x1*(parseInt(_0x310085(0x7f))/0x2)+-parseInt(_0x310085(0xc6))/0x3*(parseInt(_0x310085(0x90))/0x4)+parseInt(_0x310085(0xb6))/0x5+-parseInt(_0x310085(0xb8))/0x6*(parseInt(_0x310085(0x87))/0x7)+-parseInt(_0x310085(0x84))/0x8+parseInt(_0x310085(0xb7))/0x9*(parseInt(_0x310085(0xb0))/0xa)+parseInt(_0x310085(0xbb))/0xb;if(_0x22391d===_0xa1dfc5)break;else _0x3e07ec['push'](_0x3e07ec['shift']());}catch(_0xdd46e4){_0x3e07ec['push'](_0x3e07ec['shift']());}}}(a5_0x3600,0xc5ae3),((()=>{'use strict';const _0x346aa6=a5_0x4136;var _0x31a2b5={0x31:(_0x1c70d9,_0x5b35d4,_0x35632e)=>{const _0x1bb9df=a5_0x4136;_0x35632e['d'](_0x5b35d4,{'M':()=>_0x50ed2f});var _0x3ee6cd=_0x35632e(0x1ae);class _0x50ed2f{static['validateEmail'](_0x5bef90){const _0x2d0162=a5_0x4136;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/[_0x2d0162(0xb3)](_0x5bef90);}static[_0x1bb9df(0xa3)](_0x132ea9){const _0x37d353=_0x1bb9df;let _0x1197ef=_0x132ea9[_0x37d353(0xca)](/[^0-9+]/g,'');return _0x1197ef[_0x37d353(0xc2)]('+84')&&(_0x1197ef='0'+_0x1197ef[_0x37d353(0xbe)](0x3)),/^(0)(3[2-9]|5[689]|7[06-9]|8[1-689]|9[0-46-9])[0-9]{7}$/[_0x37d353(0xb3)](_0x1197ef);}static['displayError'](_0x3ea3a6,_0x53f9d8){const _0x27f8c3=_0x1bb9df,_0x16a9d5=document[_0x27f8c3(0xd0)](_0x27f8c3(0xcc)+_0x3ea3a6+'\x22]');_0x16a9d5&&(''===_0x53f9d8?_0x16a9d5[_0x27f8c3(0x99)][_0x27f8c3(0x94)](_0x27f8c3(0xa5)):_0x16a9d5[_0x27f8c3(0x99)][_0x27f8c3(0xad)]('hidden'),_0x16a9d5[_0x27f8c3(0x8a)]=_0x53f9d8);}static[_0x1bb9df(0xc5)](_0x3a42b4){const _0x176777=_0x1bb9df;this[_0x176777(0x7e)](_0x3a42b4,'');}static[_0x1bb9df(0x9f)](_0x5deff2=''){const _0x18e7d6=_0x1bb9df;window[_0x18e7d6(0x98)][_0x18e7d6(0xc1)]=''+_0x3ee6cd['c']+_0x5deff2;}}},0x1ae:(_0x4eecb0,_0x250a31,_0x3f1d66)=>{const _0x439dad=a5_0x4136;_0x3f1d66['d'](_0x250a31,{'c':()=>_0x3bd303});const _0x3bd303=_0x439dad(0x8b);}},_0x186206={};function _0xaeca9c(_0x4e3ef3){const _0x567a9a=a5_0x4136;var _0x4963da=_0x186206[_0x4e3ef3];if(void 0x0!==_0x4963da)return _0x4963da['exports'];var _0x3a071f=_0x186206[_0x4e3ef3]={'exports':{}};return _0x31a2b5[_0x4e3ef3](_0x3a071f,_0x3a071f[_0x567a9a(0x89)],_0xaeca9c),_0x3a071f[_0x567a9a(0x89)];}_0xaeca9c['d']=(_0x5423fb,_0x111558)=>{const _0xcffbc6=a5_0x4136;for(var _0xd7e4d0 in _0x111558)_0xaeca9c['o'](_0x111558,_0xd7e4d0)&&!_0xaeca9c['o'](_0x5423fb,_0xd7e4d0)&&Object[_0xcffbc6(0xc9)](_0x5423fb,_0xd7e4d0,{'enumerable':!0x0,'get':_0x111558[_0xd7e4d0]});},_0xaeca9c['o']=(_0x59e368,_0x4c7723)=>Object[_0x346aa6(0xa4)][_0x346aa6(0xab)]['call'](_0x59e368,_0x4c7723);var _0x56daab=_0xaeca9c(0x1ae),_0x5f3d14=_0xaeca9c(0x31);new class{[_0x346aa6(0xa1)]=null;[_0x346aa6(0xbc)]=null;['refreshTimeoutId']=null;constructor(){const _0x598cff=_0x346aa6;this['accessToken']=localStorage[_0x598cff(0xa9)](_0x598cff(0xae)),this[_0x598cff(0x92)]();}async['checkEmailExists'](_0x3a107a){const _0xc8f707=_0x346aa6,_0x417660=new FormData();_0x417660['append'](_0xc8f707(0xcf),_0x3a107a);const _0x306f8c=_0x56daab['c']+_0xc8f707(0xc4);try{const _0x168773=await fetch(_0x306f8c,{'method':_0xc8f707(0x85),'body':_0x417660})[_0xc8f707(0x86)](_0x1629d8=>_0x1629d8[_0xc8f707(0x8c)]());return!!_0x168773[_0xc8f707(0xb4)]&&_0x168773[_0xc8f707(0xce)]['exists'];}catch(_0x87961d){console['error'](_0x87961d);}}async[_0x346aa6(0xaf)](_0x3445a4){const _0x51b393=_0x346aa6,_0x1f249b=new FormData();_0x1f249b['append']('phone_number',_0x3445a4);const _0x4f35dd=_0x56daab['c']+_0x51b393(0xbd);try{const _0x5bf3fd=await fetch(_0x4f35dd,{'method':'post','body':_0x1f249b})[_0x51b393(0x86)](_0x17a745=>_0x17a745[_0x51b393(0x8c)]());return!!_0x5bf3fd[_0x51b393(0xb4)]&&_0x5bf3fd[_0x51b393(0xce)]['exists'];}catch(_0x5d5de6){console['error'](_0x5d5de6);}}[_0x346aa6(0xac)](){const _0x2040b0=_0x346aa6;return null!==this[_0x2040b0(0xa1)];}async[_0x346aa6(0x9c)](_0x2d2a7f){const _0x433219=_0x346aa6,_0x382803=_0x56daab['c']+_0x433219(0x7d);return await fetch(_0x382803,{'method':'post','body':_0x2d2a7f})[_0x433219(0x86)](_0x5329c3=>_0x5329c3[_0x433219(0x8c)]());}async[_0x346aa6(0x9d)](_0x3ecc10){const _0x4d9f26=_0x346aa6,_0x2ef752=_0x56daab['c']+_0x4d9f26(0x8d);return await fetch(_0x2ef752,{'method':_0x4d9f26(0x85),'body':_0x3ecc10})['then'](_0x6f3ac5=>_0x6f3ac5['json']());}async[_0x346aa6(0xa7)](_0xb6db75){const _0x3b9e66=_0x346aa6,_0x87072e=_0x56daab['c']+_0x3b9e66(0x88),_0x385e6b=await fetch(_0x87072e,{'method':_0x3b9e66(0x85),'body':_0xb6db75})[_0x3b9e66(0x86)](_0xf0c14f=>_0xf0c14f[_0x3b9e66(0x8c)]());return _0x385e6b[_0x3b9e66(0xb4)]&&(this[_0x3b9e66(0xa1)]=_0x385e6b[_0x3b9e66(0xce)]['access_token'],localStorage[_0x3b9e66(0xc8)]('access_token',_0x385e6b['data'][_0x3b9e66(0xae)]),localStorage[_0x3b9e66(0xc8)](_0x3b9e66(0x91),String(_0x385e6b[_0x3b9e66(0xce)][_0x3b9e66(0xa8)]))),_0x385e6b;}async[_0x346aa6(0x80)](_0x5cc50f){const _0x14aad5=_0x346aa6,_0x5ab107=_0x56daab['c']+_0x14aad5(0xba);return await fetch(_0x5ab107,{'method':_0x14aad5(0x85),'body':_0x5cc50f})[_0x14aad5(0x86)](_0x1d1e78=>_0x1d1e78[_0x14aad5(0x8c)]());}async[_0x346aa6(0x8f)](_0x53be58){const _0x5181bc=_0x346aa6,_0xb804a=_0x56daab['c']+_0x5181bc(0xcb);return await fetch(_0xb804a,{'method':_0x5181bc(0x85),'body':_0x53be58})['then'](_0x24b45b=>_0x24b45b['json']());}async[_0x346aa6(0x9b)](){const _0x3559ff=_0x346aa6,_0x4f996a=this[_0x3559ff(0xa1)];this['accessToken']=null,this[_0x3559ff(0x96)](),localStorage[_0x3559ff(0x81)]('access_token'),localStorage[_0x3559ff(0x81)](_0x3559ff(0x91));try{const _0x4a1255=_0x56daab['c']+_0x3559ff(0x8e);await fetch(_0x4a1255,{'method':'post','headers':{'Authorization':_0x3559ff(0xb9)+_0x4f996a}})[_0x3559ff(0x86)](_0x3866e4=>_0x3866e4[_0x3559ff(0x8c)]());}catch(_0x4bb794){console[_0x3559ff(0x93)](_0x3559ff(0xb2),_0x4bb794);}_0x5f3d14['M'][_0x3559ff(0x9f)](_0x3559ff(0xa6));}async[_0x346aa6(0xb1)](_0x3e71f7,_0x300bfc={}){const _0x43c99f=_0x346aa6,_0x4d5846=this['accessToken'],_0x4d465f=new Headers(_0x300bfc[_0x43c99f(0xc3)]||{});_0x4d5846&&_0x4d465f[_0x43c99f(0x82)](_0x43c99f(0xc7),_0x43c99f(0xb9)+_0x4d5846),_0x300bfc[_0x43c99f(0xc3)]=_0x4d465f;let _0x5936b4=await fetch(_0x3e71f7,_0x300bfc);if(0x191===_0x5936b4[_0x43c99f(0x95)])try{const _0x1d2c51=await this['refreshToken']();_0x4d465f[_0x43c99f(0x82)](_0x43c99f(0xc7),_0x43c99f(0xb9)+_0x1d2c51),_0x300bfc['headers']=_0x4d465f,console['log'](_0x43c99f(0xa0)),_0x5936b4=await fetch(_0x3e71f7,_0x300bfc);}catch(_0x2f0a1e){console[_0x43c99f(0x93)](_0x43c99f(0x83),_0x2f0a1e),this['logout'](),_0x5f3d14['M'][_0x43c99f(0x9f)](_0x43c99f(0xa6));}return _0x5936b4;}async[_0x346aa6(0x9a)](){const _0xccd31=_0x346aa6;if(!this[_0xccd31(0xbc)]){const _0x535e07=_0x56daab['c']+_0xccd31(0x97);this[_0xccd31(0xbc)]=fetch(_0x535e07,{'method':_0xccd31(0xc0)})['then'](async _0x16259b=>{const _0x12a0a2=_0xccd31;if(!_0x16259b['ok'])throw new Error(_0x12a0a2(0xa2));const _0x9bfa6b=await _0x16259b[_0x12a0a2(0x8c)]();if(_0x9bfa6b[_0x12a0a2(0xb4)])return this[_0x12a0a2(0xa1)]=_0x9bfa6b['data'][_0x12a0a2(0xae)],localStorage['setItem'](_0x12a0a2(0xae),this[_0x12a0a2(0xa1)]),localStorage[_0x12a0a2(0xc8)](_0x12a0a2(0x91),String(_0x9bfa6b['data'][_0x12a0a2(0xa8)])),this[_0x12a0a2(0x92)](),this['accessToken'];throw new Error(_0x9bfa6b[_0x12a0a2(0xb5)]||_0x12a0a2(0xbf));})[_0xccd31(0xaa)](()=>{this['refreshTokenPromise']=null;});}return this[_0xccd31(0xbc)];}[_0x346aa6(0x96)](){const _0x5db317=_0x346aa6;this[_0x5db317(0x9e)]&&(clearTimeout(this[_0x5db317(0x9e)]),this['refreshTimeoutId']=null);}async[_0x346aa6(0x92)](){const _0x11373f=_0x346aa6;this['stopTokenRefreshTimer']();const _0x33e5f4=localStorage[_0x11373f(0xa9)](_0x11373f(0x91));if(!_0x33e5f4)return;const _0x219123=0x3e8*parseInt(_0x33e5f4,0xa)-Date['now']()-0xea60;if(_0x219123>0x0)this[_0x11373f(0x9e)]=setTimeout(async()=>{const _0x332f9b=_0x11373f;try{await this[_0x332f9b(0x9a)]();}catch(_0x1a058d){this[_0x332f9b(0x9b)]();}},_0x219123);else try{await this[_0x11373f(0x9a)]();}catch(_0x21bdf7){this['logout']();}}}();})()));