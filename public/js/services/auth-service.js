(function(_0x3ff155,_0x2b16f1){const _0x382333=a5_0x3102,_0x528571=_0x3ff155();while(!![]){try{const _0x80d1f7=parseInt(_0x382333(0xef))/0x1*(parseInt(_0x382333(0xd1))/0x2)+-parseInt(_0x382333(0xdc))/0x3*(-parseInt(_0x382333(0x10e))/0x4)+parseInt(_0x382333(0xdf))/0x5+-parseInt(_0x382333(0xc9))/0x6*(parseInt(_0x382333(0x107))/0x7)+parseInt(_0x382333(0xcf))/0x8+parseInt(_0x382333(0xdd))/0x9*(parseInt(_0x382333(0x101))/0xa)+-parseInt(_0x382333(0xf6))/0xb*(parseInt(_0x382333(0xce))/0xc);if(_0x80d1f7===_0x2b16f1)break;else _0x528571['push'](_0x528571['shift']());}catch(_0x336c12){_0x528571['push'](_0x528571['shift']());}}}(a5_0x25cf,0x8b4b3),((()=>{'use strict';const _0x532d29=a5_0x3102;var _0x4a8b52={0x31:(_0x26cf22,_0x5e2367,_0x311b52)=>{const _0x4b7d57=a5_0x3102;_0x311b52['d'](_0x5e2367,{'M':()=>_0x5229a4});var _0x6c5a8e=_0x311b52(0x1ae);class _0x5229a4{static[_0x4b7d57(0xe7)](_0x3cd89b){const _0x28669d=_0x4b7d57;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/[_0x28669d(0x10d)](_0x3cd89b);}static[_0x4b7d57(0xf5)](_0x24ec18){const _0x92db1e=_0x4b7d57;let _0x2b1da8=_0x24ec18[_0x92db1e(0xfe)](/[^0-9+]/g,'');return _0x2b1da8[_0x92db1e(0x10b)](_0x92db1e(0xd0))&&(_0x2b1da8='0'+_0x2b1da8[_0x92db1e(0xe1)](0x3)),/^(0)(3[2-9]|5[689]|7[06-9]|8[1-689]|9[0-46-9])[0-9]{7}$/[_0x92db1e(0x10d)](_0x2b1da8);}static[_0x4b7d57(0x115)](_0x59b835,_0x285330){const _0x117947=_0x4b7d57,_0xec9937=document[_0x117947(0x103)](_0x117947(0xd5)+_0x59b835+'\x22]');_0xec9937&&(''===_0x285330?_0xec9937['classList'][_0x117947(0xda)](_0x117947(0xd8)):_0xec9937['classList']['remove'](_0x117947(0xd8)),_0xec9937[_0x117947(0xdb)]=_0x285330);}static[_0x4b7d57(0xd4)](_0x2ed7f4){this['displayError'](_0x2ed7f4,'');}static[_0x4b7d57(0xe4)](_0x2c3593=''){const _0x326748=_0x4b7d57;window[_0x326748(0xcb)]['href']=''+_0x6c5a8e['c']+_0x2c3593;}}},0x1ae:(_0x157adc,_0x4f6b0c,_0x1b6891)=>{const _0x290104=a5_0x3102;_0x1b6891['d'](_0x4f6b0c,{'c':()=>_0x198898});const _0x198898=_0x290104(0xd6);}},_0x1cc2c6={};function _0x124931(_0x4227f2){const _0x1fe57d=a5_0x3102;var _0x5378ad=_0x1cc2c6[_0x4227f2];if(void 0x0!==_0x5378ad)return _0x5378ad[_0x1fe57d(0x10c)];var _0x2d8fb7=_0x1cc2c6[_0x4227f2]={'exports':{}};return _0x4a8b52[_0x4227f2](_0x2d8fb7,_0x2d8fb7['exports'],_0x124931),_0x2d8fb7[_0x1fe57d(0x10c)];}_0x124931['d']=(_0x2faa6a,_0x53dd78)=>{const _0x1db6f8=a5_0x3102;for(var _0x583d4a in _0x53dd78)_0x124931['o'](_0x53dd78,_0x583d4a)&&!_0x124931['o'](_0x2faa6a,_0x583d4a)&&Object[_0x1db6f8(0xf1)](_0x2faa6a,_0x583d4a,{'enumerable':!0x0,'get':_0x53dd78[_0x583d4a]});},_0x124931['o']=(_0x396668,_0x176d04)=>Object['prototype'][_0x532d29(0xf4)][_0x532d29(0xf2)](_0x396668,_0x176d04);var _0x14c842=_0x124931(0x1ae),_0x168081=_0x124931(0x31);new class{[_0x532d29(0x110)]=null;[_0x532d29(0x106)]=null;['refreshTimeoutId']=null;constructor(){const _0x5a1d6a=_0x532d29;this[_0x5a1d6a(0x110)]=localStorage['getItem'](_0x5a1d6a(0x108)),this[_0x5a1d6a(0xeb)]();}async[_0x532d29(0x105)](_0x4f0c3b){const _0x2629d4=_0x532d29,_0x48969c=new FormData();_0x48969c['append'](_0x2629d4(0x109),_0x4f0c3b);const _0x1f08ef=_0x14c842['c']+_0x2629d4(0xea);try{const _0x41ed62=await fetch(_0x1f08ef,{'method':_0x2629d4(0x11a),'body':_0x48969c})[_0x2629d4(0xf7)](_0x4fef5a=>_0x4fef5a[_0x2629d4(0xe6)]());return!!_0x41ed62[_0x2629d4(0xed)]&&_0x41ed62[_0x2629d4(0xe2)]['exists'];}catch(_0x4cf24a){console[_0x2629d4(0xcc)](_0x4cf24a);}}async[_0x532d29(0xfc)](_0x5185f7){const _0x4fc051=_0x532d29,_0x1d68fb=new FormData();_0x1d68fb[_0x4fc051(0xfd)](_0x4fc051(0xd7),_0x5185f7);const _0x374f0e=_0x14c842['c']+'/api/check-phone-number';try{const _0x42f276=await fetch(_0x374f0e,{'method':_0x4fc051(0x11a),'body':_0x1d68fb})[_0x4fc051(0xf7)](_0x832947=>_0x832947[_0x4fc051(0xe6)]());return!!_0x42f276['success']&&_0x42f276['data'][_0x4fc051(0xf8)];}catch(_0x4db319){console[_0x4fc051(0xcc)](_0x4db319);}}[_0x532d29(0x10a)](){const _0x2d36a0=_0x532d29;return null!==this[_0x2d36a0(0x110)];}async[_0x532d29(0xe0)](_0x533e4a){const _0x3d1619=_0x532d29,_0x396331=_0x14c842['c']+_0x3d1619(0x118);return await fetch(_0x396331,{'method':_0x3d1619(0x11a),'body':_0x533e4a})['then'](_0x3b430d=>_0x3b430d[_0x3d1619(0xe6)]());}async[_0x532d29(0x10f)](_0x2ae818){const _0x5bc2c6=_0x532d29,_0x5cd409=_0x14c842['c']+_0x5bc2c6(0xec);return await fetch(_0x5cd409,{'method':_0x5bc2c6(0x11a),'body':_0x2ae818})[_0x5bc2c6(0xf7)](_0x5cea53=>_0x5cea53[_0x5bc2c6(0xe6)]());}async['login'](_0x4fb34a){const _0x4a2633=_0x532d29,_0x12f956=_0x14c842['c']+_0x4a2633(0xca),_0x30a7d3=await fetch(_0x12f956,{'method':_0x4a2633(0x11a),'body':_0x4fb34a})[_0x4a2633(0xf7)](_0x3ea808=>_0x3ea808['json']());return _0x30a7d3[_0x4a2633(0xed)]&&(this['accessToken']=_0x30a7d3[_0x4a2633(0xe2)][_0x4a2633(0x108)],localStorage[_0x4a2633(0xe8)]('access_token',_0x30a7d3[_0x4a2633(0xe2)][_0x4a2633(0x108)]),localStorage['setItem'](_0x4a2633(0xcd),String(_0x30a7d3[_0x4a2633(0xe2)][_0x4a2633(0xd2)]))),_0x30a7d3;}async[_0x532d29(0xd9)](_0x1f9946){const _0x4086f1=_0x532d29,_0xd6fc22=_0x14c842['c']+'/api/forgot-password';return await fetch(_0xd6fc22,{'method':_0x4086f1(0x11a),'body':_0x1f9946})[_0x4086f1(0xf7)](_0x9f5dd7=>_0x9f5dd7[_0x4086f1(0xe6)]());}async[_0x532d29(0xe9)](_0xee58e4){const _0x2b94c3=_0x532d29,_0x21cb41=_0x14c842['c']+_0x2b94c3(0xd3);return await fetch(_0x21cb41,{'method':_0x2b94c3(0x11a),'body':_0xee58e4})[_0x2b94c3(0xf7)](_0x174809=>_0x174809[_0x2b94c3(0xe6)]());}async[_0x532d29(0x113)](){const _0x53d88d=_0x532d29,_0x4cfab5=this[_0x53d88d(0x110)];this[_0x53d88d(0x110)]=null,this[_0x53d88d(0x11c)](),localStorage[_0x53d88d(0xde)](_0x53d88d(0x108)),localStorage[_0x53d88d(0xde)](_0x53d88d(0xcd));try{const _0x197228=_0x14c842['c']+_0x53d88d(0x11b);await fetch(_0x197228,{'method':_0x53d88d(0x11a),'headers':{'Authorization':_0x53d88d(0xf3)+_0x4cfab5}})[_0x53d88d(0xf7)](_0x5634d5=>_0x5634d5['json']());}catch(_0x4a7e28){console['error'](_0x53d88d(0x114),_0x4a7e28);}_0x168081['M'][_0x53d88d(0xe4)](_0x53d88d(0xf9));}async[_0x532d29(0x116)](_0x205cdd,_0x5cb009={}){const _0x3e201e=_0x532d29,_0x13d385=this[_0x3e201e(0x110)],_0x4593d4=new Headers(_0x5cb009[_0x3e201e(0xf0)]||{});_0x13d385&&_0x4593d4['set'](_0x3e201e(0x119),'Bearer\x20'+_0x13d385),_0x5cb009[_0x3e201e(0xf0)]=_0x4593d4;let _0x23e213=await fetch(_0x205cdd,_0x5cb009);if(0x191===_0x23e213[_0x3e201e(0xfa)])try{const _0x5cd375=await this[_0x3e201e(0x104)]();_0x4593d4[_0x3e201e(0x102)](_0x3e201e(0x119),_0x3e201e(0xf3)+_0x5cd375),_0x5cb009[_0x3e201e(0xf0)]=_0x4593d4,console[_0x3e201e(0x111)](_0x3e201e(0xff)),_0x23e213=await fetch(_0x205cdd,_0x5cb009);}catch(_0x5e0311){console[_0x3e201e(0xcc)](_0x3e201e(0xfb),_0x5e0311),this[_0x3e201e(0x113)](),_0x168081['M']['redirect']('/login');}return _0x23e213;}async[_0x532d29(0x104)](){const _0x2476e4=_0x532d29;if(!this['refreshTokenPromise']){const _0x594452=_0x14c842['c']+_0x2476e4(0xee);this[_0x2476e4(0x106)]=fetch(_0x594452,{'method':'POST'})[_0x2476e4(0xf7)](async _0x3ae2a6=>{const _0x46ad6b=_0x2476e4;if(!_0x3ae2a6['ok'])throw new Error(_0x46ad6b(0x112));const _0x48464d=await _0x3ae2a6['json']();if(_0x48464d[_0x46ad6b(0xed)])return this[_0x46ad6b(0x110)]=_0x48464d[_0x46ad6b(0xe2)]['access_token'],localStorage[_0x46ad6b(0xe8)]('access_token',this[_0x46ad6b(0x110)]),localStorage[_0x46ad6b(0xe8)](_0x46ad6b(0xcd),String(_0x48464d[_0x46ad6b(0xe2)][_0x46ad6b(0xd2)])),this[_0x46ad6b(0xeb)](),this[_0x46ad6b(0x110)];throw new Error(_0x48464d['message']||'Đã\x20xảy\x20ra\x20lỗi\x20từ\x20refresh\x20token\x20API');})[_0x2476e4(0x117)](()=>{const _0x2caf9f=_0x2476e4;this[_0x2caf9f(0x106)]=null;});}return this['refreshTokenPromise'];}[_0x532d29(0x11c)](){const _0x24c063=_0x532d29;this[_0x24c063(0x100)]&&(clearTimeout(this[_0x24c063(0x100)]),this['refreshTimeoutId']=null);}async[_0x532d29(0xeb)](){const _0x1aa91f=_0x532d29;this[_0x1aa91f(0x11c)]();const _0x346a94=localStorage[_0x1aa91f(0xe3)](_0x1aa91f(0xcd));if(!_0x346a94)return;const _0x30c970=0x3e8*parseInt(_0x346a94,0xa)-Date['now']()-0xea60;if(_0x30c970>0x0)this[_0x1aa91f(0x100)]=setTimeout(async()=>{const _0x486e43=_0x1aa91f;try{await this[_0x486e43(0x104)]();}catch(_0x4fa051){console[_0x486e43(0xcc)]('Tự\x20động\x20làm\x20mới\x20token\x20thất\x20bại:',_0x4fa051);}},_0x30c970);else try{await this[_0x1aa91f(0x104)]();}catch(_0x21dd89){console['error'](_0x1aa91f(0xe5),_0x21dd89);}}}();})()));function a5_0x3102(_0x492313,_0x40bc05){const _0x25cfbc=a5_0x25cf();return a5_0x3102=function(_0x31021c,_0x1145f0){_0x31021c=_0x31021c-0xc9;let _0x1216c3=_0x25cfbc[_0x31021c];return _0x1216c3;},a5_0x3102(_0x492313,_0x40bc05);}function a5_0x25cf(){const _0x3dc184=['test','4rBeNmg','activateAccount','accessToken','log','Refresh\x20token\x20không\x20hợp\x20lệ\x20hoặc\x20đã\x20hết\x20hạn.','logout','Lỗi\x20khi\x20gọi\x20API\x20logout:','displayError','fetchWithAuth','finally','/api/register','Authorization','post','/api/logout','stopTokenRefreshTimer','498438WxDZfq','/api/login','location','error','token_expires_at','5736FokdZN','8686760obWRYu','+84','8sCIQOO','expires_in','/api/reset-password','clearError','.error-log[data-field=\x22','https://fluffy-telegram-r79rvrrrr4h6gw-80.app.github.dev/doan-phpcoban','phone_number','hidden','forgotPassword','add','textContent','1293132aIoGSJ','9IRVtvR','removeItem','4589555ezPJbM','register','slice','data','getItem','redirect','Tự\x20động\x20làm\x20mới\x20token\x20thất\x20bại:','json','validateEmail','setItem','resetPassword','/api/check-email','scheduleNextTokenRefresh','/api/activate','success','/api/refresh-token','63636XMOwdB','headers','defineProperty','call','Bearer\x20','hasOwnProperty','isPhone','45386FCdsiQ','then','exists','/login','status','Lấy\x20token\x20thất\x20bại.\x20Đăng\x20xuất.','checkPhoneNumberExists','append','replace','Token\x20refreshed.\x20Retrying\x20the\x20original\x20request...','refreshTimeoutId','4349420bCHYhT','set','querySelector','refreshToken','checkEmailExists','refreshTokenPromise','49PGDSxh','access_token','email','isLoggedIn','startsWith','exports'];a5_0x25cf=function(){return _0x3dc184;};return a5_0x25cf();}