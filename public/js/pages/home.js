function a6_0x5459(){const _0x299313=['startsWith','Authorization','+84','exports','isPhone','/api/activate','6416102BwTdes','add','access_token','/api/reset-password','login','prototype','549664ETQqXF','511569dkcpPe','redirect','btn-logout','692QyWdRv','click','https://fluffy-telegram-r79rvrrrr4h6gw-80.app.github.dev/doan-phpcoban','getItem','then','scheduleNextTokenRefresh','3750QAYXdi','stopTokenRefreshTimer','querySelector','10870UdzMMA','href','append','finally','data','classList','logout','log','displayError','defineProperty','post','2601RvFUfA','accessToken','removeItem','Token\x20refreshed.\x20Retrying\x20the\x20original\x20request...','now','addEventListener','message','/login','refreshTimeoutId','18oKoWJr','POST','json','headers','refreshToken','set','exists','slice','expires_in','forgotPassword','resetPassword','token_expires_at','textContent','/api/forgot-password','/api/register','/api/check-email','getElementById','test','status','fetchWithAuth','6wFeTIS','2385103JQHfPp','clearError','hidden','isLoggedIn','phone_number','checkPhoneNumberExists','setItem','error','remove','72108RXZCbF','Bearer\x20','refreshTokenPromise','success'];a6_0x5459=function(){return _0x299313;};return a6_0x5459();}function a6_0x4d34(_0x7200ae,_0x4620d8){const _0x545973=a6_0x5459();return a6_0x4d34=function(_0x4d341e,_0x1b95a5){_0x4d341e=_0x4d341e-0x14e;let _0x465344=_0x545973[_0x4d341e];return _0x465344;},a6_0x4d34(_0x7200ae,_0x4620d8);}(function(_0x5e9220,_0x345cea){const _0x55cbc9=a6_0x4d34,_0x10755f=_0x5e9220();while(!![]){try{const _0x31dbe8=-parseInt(_0x55cbc9(0x15d))/0x1+-parseInt(_0x55cbc9(0x17d))/0x2*(parseInt(_0x55cbc9(0x19b))/0x3)+-parseInt(_0x55cbc9(0x160))/0x4*(parseInt(_0x55cbc9(0x166))/0x5)+parseInt(_0x55cbc9(0x191))/0x6*(parseInt(_0x55cbc9(0x192))/0x7)+-parseInt(_0x55cbc9(0x15c))/0x8+-parseInt(_0x55cbc9(0x174))/0x9*(-parseInt(_0x55cbc9(0x169))/0xa)+parseInt(_0x55cbc9(0x156))/0xb;if(_0x31dbe8===_0x345cea)break;else _0x10755f['push'](_0x10755f['shift']());}catch(_0x28f392){_0x10755f['push'](_0x10755f['shift']());}}}(a6_0x5459,0x4c1fb),((()=>{'use strict';const _0x38e389=a6_0x4d34;var _0x215981={0x31:(_0x319e47,_0x52eebb,_0x33ec99)=>{const _0xfbf1a7=a6_0x4d34;_0x33ec99['d'](_0x52eebb,{'M':()=>_0x1176cc});var _0x559c04=_0x33ec99(0x1ae);class _0x1176cc{static['validateEmail'](_0x37e9ce){const _0x6595f5=a6_0x4d34;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/[_0x6595f5(0x18e)](_0x37e9ce);}static[_0xfbf1a7(0x154)](_0x26146e){const _0x51c90d=_0xfbf1a7;let _0x4d4578=_0x26146e['replace'](/[^0-9+]/g,'');return _0x4d4578[_0x51c90d(0x150)](_0x51c90d(0x152))&&(_0x4d4578='0'+_0x4d4578[_0x51c90d(0x184)](0x3)),/^(0)(3[2-9]|5[689]|7[06-9]|8[1-689]|9[0-46-9])[0-9]{7}$/[_0x51c90d(0x18e)](_0x4d4578);}static[_0xfbf1a7(0x171)](_0x3f92a9,_0x7a82a1){const _0x2115bf=_0xfbf1a7,_0x6dcfff=document[_0x2115bf(0x168)]('.error-log[data-field=\x22'+_0x3f92a9+'\x22]');_0x6dcfff&&(''===_0x7a82a1?_0x6dcfff[_0x2115bf(0x16e)][_0x2115bf(0x157)](_0x2115bf(0x194)):_0x6dcfff[_0x2115bf(0x16e)][_0x2115bf(0x19a)](_0x2115bf(0x194)),_0x6dcfff[_0x2115bf(0x189)]=_0x7a82a1);}static[_0xfbf1a7(0x193)](_0x3eaccd){const _0x1f61e7=_0xfbf1a7;this[_0x1f61e7(0x171)](_0x3eaccd,'');}static[_0xfbf1a7(0x15e)](_0x3ccef2=''){const _0x45831e=_0xfbf1a7;window['location'][_0x45831e(0x16a)]=''+_0x559c04['c']+_0x3ccef2;}}},0x1ae:(_0x88a591,_0x25b35d,_0x4061ef)=>{const _0x350de5=a6_0x4d34;_0x4061ef['d'](_0x25b35d,{'c':()=>_0x3b743d});const _0x3b743d=_0x350de5(0x162);},0x2d0:(_0x35e2b0,_0xe11ae8,_0x464d0a)=>{const _0x4f23f5=a6_0x4d34;_0x464d0a['d'](_0xe11ae8,{'y':()=>_0x418075});var _0x2e2c55=_0x464d0a(0x1ae),_0x1fe0cb=_0x464d0a(0x31);const _0x418075=new class{[_0x4f23f5(0x175)]=null;[_0x4f23f5(0x14e)]=null;['refreshTimeoutId']=null;constructor(){const _0x15e907=_0x4f23f5;this[_0x15e907(0x175)]=localStorage[_0x15e907(0x163)](_0x15e907(0x158)),this[_0x15e907(0x165)]();}async['checkEmailExists'](_0x393f77){const _0xacad7e=_0x4f23f5,_0x37fac6=new FormData();_0x37fac6[_0xacad7e(0x16b)]('email',_0x393f77);const _0x23df49=_0x2e2c55['c']+_0xacad7e(0x18c);try{const _0x3062ce=await fetch(_0x23df49,{'method':'post','body':_0x37fac6})[_0xacad7e(0x164)](_0x1e6988=>_0x1e6988['json']());return!!_0x3062ce[_0xacad7e(0x14f)]&&_0x3062ce['data'][_0xacad7e(0x183)];}catch(_0x3b0b09){console[_0xacad7e(0x199)](_0x3b0b09);}}async[_0x4f23f5(0x197)](_0x1bd4a7){const _0x4b71b2=_0x4f23f5,_0x4cfa8b=new FormData();_0x4cfa8b[_0x4b71b2(0x16b)](_0x4b71b2(0x196),_0x1bd4a7);const _0x16c46e=_0x2e2c55['c']+'/api/check-phone-number';try{const _0x4e7460=await fetch(_0x16c46e,{'method':'post','body':_0x4cfa8b})['then'](_0x5743ac=>_0x5743ac[_0x4b71b2(0x17f)]());return!!_0x4e7460[_0x4b71b2(0x14f)]&&_0x4e7460[_0x4b71b2(0x16d)][_0x4b71b2(0x183)];}catch(_0x33c4f4){console[_0x4b71b2(0x199)](_0x33c4f4);}}[_0x4f23f5(0x195)](){const _0x175240=_0x4f23f5;return null!==this[_0x175240(0x175)];}async['register'](_0xcf6bf0){const _0x5288ef=_0x4f23f5,_0x1b7211=_0x2e2c55['c']+_0x5288ef(0x18b);return await fetch(_0x1b7211,{'method':_0x5288ef(0x173),'body':_0xcf6bf0})['then'](_0x5577fc=>_0x5577fc[_0x5288ef(0x17f)]());}async['activateAccount'](_0x100303){const _0xec9acf=_0x4f23f5,_0x3223e1=_0x2e2c55['c']+_0xec9acf(0x155);return await fetch(_0x3223e1,{'method':_0xec9acf(0x173),'body':_0x100303})[_0xec9acf(0x164)](_0x343e97=>_0x343e97[_0xec9acf(0x17f)]());}async[_0x4f23f5(0x15a)](_0x3fbeb6){const _0x4f7a7c=_0x4f23f5,_0x482434=_0x2e2c55['c']+'/api/login',_0x1412b0=await fetch(_0x482434,{'method':_0x4f7a7c(0x173),'body':_0x3fbeb6})[_0x4f7a7c(0x164)](_0x14b675=>_0x14b675[_0x4f7a7c(0x17f)]());return _0x1412b0[_0x4f7a7c(0x14f)]&&(this[_0x4f7a7c(0x175)]=_0x1412b0[_0x4f7a7c(0x16d)][_0x4f7a7c(0x158)],localStorage[_0x4f7a7c(0x198)](_0x4f7a7c(0x158),_0x1412b0[_0x4f7a7c(0x16d)][_0x4f7a7c(0x158)]),localStorage[_0x4f7a7c(0x198)](_0x4f7a7c(0x188),String(_0x1412b0[_0x4f7a7c(0x16d)][_0x4f7a7c(0x185)]))),_0x1412b0;}async[_0x4f23f5(0x186)](_0xc2bd68){const _0x4a03b4=_0x4f23f5,_0x268fa1=_0x2e2c55['c']+_0x4a03b4(0x18a);return await fetch(_0x268fa1,{'method':'post','body':_0xc2bd68})['then'](_0x13766e=>_0x13766e[_0x4a03b4(0x17f)]());}async[_0x4f23f5(0x187)](_0x299e7f){const _0x290db9=_0x4f23f5,_0x53f089=_0x2e2c55['c']+_0x290db9(0x159);return await fetch(_0x53f089,{'method':'post','body':_0x299e7f})['then'](_0x2b3938=>_0x2b3938['json']());}async[_0x4f23f5(0x16f)](){const _0x1eaed4=_0x4f23f5,_0x5be1bd=this['accessToken'];this[_0x1eaed4(0x175)]=null,this[_0x1eaed4(0x167)](),localStorage[_0x1eaed4(0x176)](_0x1eaed4(0x158)),localStorage[_0x1eaed4(0x176)]('token_expires_at');try{const _0x52e835=_0x2e2c55['c']+'/api/logout';await fetch(_0x52e835,{'method':_0x1eaed4(0x173),'headers':{'Authorization':_0x1eaed4(0x19c)+_0x5be1bd}})[_0x1eaed4(0x164)](_0x8cf411=>_0x8cf411['json']());}catch(_0x26685f){console['error']('Lỗi\x20khi\x20gọi\x20API\x20logout:',_0x26685f);}_0x1fe0cb['M']['redirect'](_0x1eaed4(0x17b));}async[_0x4f23f5(0x190)](_0x313df1,_0x4a0a0e={}){const _0x1540a1=_0x4f23f5,_0xa25499=this[_0x1540a1(0x175)],_0x4c827e=new Headers(_0x4a0a0e['headers']||{});_0xa25499&&_0x4c827e[_0x1540a1(0x182)](_0x1540a1(0x151),_0x1540a1(0x19c)+_0xa25499),_0x4a0a0e['headers']=_0x4c827e;let _0x42577a=await fetch(_0x313df1,_0x4a0a0e);if(0x191===_0x42577a[_0x1540a1(0x18f)])try{const _0x41c68c=await this[_0x1540a1(0x181)]();_0x4c827e[_0x1540a1(0x182)](_0x1540a1(0x151),_0x1540a1(0x19c)+_0x41c68c),_0x4a0a0e[_0x1540a1(0x180)]=_0x4c827e,console[_0x1540a1(0x170)](_0x1540a1(0x177)),_0x42577a=await fetch(_0x313df1,_0x4a0a0e);}catch(_0x37eb9a){console[_0x1540a1(0x199)]('Lấy\x20token\x20thất\x20bại.\x20Đăng\x20xuất.',_0x37eb9a),this['logout'](),_0x1fe0cb['M'][_0x1540a1(0x15e)](_0x1540a1(0x17b));}return _0x42577a;}async[_0x4f23f5(0x181)](){const _0x30046c=_0x4f23f5;if(!this['refreshTokenPromise']){const _0x2bdb35=_0x2e2c55['c']+'/api/refresh-token';this[_0x30046c(0x14e)]=fetch(_0x2bdb35,{'method':_0x30046c(0x17e)})[_0x30046c(0x164)](async _0x366456=>{const _0x2b3a7a=_0x30046c;if(!_0x366456['ok'])throw new Error('Refresh\x20token\x20không\x20hợp\x20lệ\x20hoặc\x20đã\x20hết\x20hạn.');const _0x347256=await _0x366456[_0x2b3a7a(0x17f)]();if(_0x347256[_0x2b3a7a(0x14f)])return this[_0x2b3a7a(0x175)]=_0x347256[_0x2b3a7a(0x16d)][_0x2b3a7a(0x158)],localStorage['setItem'](_0x2b3a7a(0x158),this['accessToken']),localStorage['setItem'](_0x2b3a7a(0x188),String(_0x347256[_0x2b3a7a(0x16d)][_0x2b3a7a(0x185)])),this[_0x2b3a7a(0x165)](),this['accessToken'];throw new Error(_0x347256[_0x2b3a7a(0x17a)]||'Đã\x20xảy\x20ra\x20lỗi\x20từ\x20refresh\x20token\x20API');})[_0x30046c(0x16c)](()=>{const _0x160d73=_0x30046c;this[_0x160d73(0x14e)]=null;});}return this[_0x30046c(0x14e)];}[_0x4f23f5(0x167)](){const _0x3bd730=_0x4f23f5;this['refreshTimeoutId']&&(clearTimeout(this['refreshTimeoutId']),this[_0x3bd730(0x17c)]=null);}async[_0x4f23f5(0x165)](){const _0x59d8cb=_0x4f23f5;this[_0x59d8cb(0x167)]();const _0x2aa8a0=localStorage[_0x59d8cb(0x163)](_0x59d8cb(0x188));if(!_0x2aa8a0)return;const _0x289bed=0x3e8*parseInt(_0x2aa8a0,0xa)-Date[_0x59d8cb(0x178)]()-0xea60;if(_0x289bed>0x0)this[_0x59d8cb(0x17c)]=setTimeout(async()=>{const _0x42f248=_0x59d8cb;try{await this[_0x42f248(0x181)]();}catch(_0x597742){this[_0x42f248(0x16f)]();}},_0x289bed);else try{await this[_0x59d8cb(0x181)]();}catch(_0x99f789){this[_0x59d8cb(0x16f)]();}}}();}},_0x1e6f71={};function _0x122cf9(_0xead17d){const _0xed2522=a6_0x4d34;var _0xdfd32b=_0x1e6f71[_0xead17d];if(void 0x0!==_0xdfd32b)return _0xdfd32b[_0xed2522(0x153)];var _0x91843=_0x1e6f71[_0xead17d]={'exports':{}};return _0x215981[_0xead17d](_0x91843,_0x91843[_0xed2522(0x153)],_0x122cf9),_0x91843[_0xed2522(0x153)];}_0x122cf9['d']=(_0x3b2bde,_0x489a3f)=>{const _0x4ca42a=a6_0x4d34;for(var _0x29ff3e in _0x489a3f)_0x122cf9['o'](_0x489a3f,_0x29ff3e)&&!_0x122cf9['o'](_0x3b2bde,_0x29ff3e)&&Object[_0x4ca42a(0x172)](_0x3b2bde,_0x29ff3e,{'enumerable':!0x0,'get':_0x489a3f[_0x29ff3e]});},_0x122cf9['o']=(_0x37faa1,_0x4cf7c8)=>Object[_0x38e389(0x15b)]['hasOwnProperty']['call'](_0x37faa1,_0x4cf7c8);var _0x295607=_0x122cf9(0x2d0);const _0x5ecbbd=document[_0x38e389(0x18d)](_0x38e389(0x15f));_0x5ecbbd?.[_0x38e389(0x179)](_0x38e389(0x161),async()=>{const _0x55211b=_0x38e389;await _0x295607['y'][_0x55211b(0x16f)]();});})()));