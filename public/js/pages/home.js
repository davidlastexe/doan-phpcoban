function a6_0x5098(){const _0x23588f=['finally','token_expires_at','success','setItem','error','8JgpECf','checkPhoneNumberExists','defineProperty','hidden','https://fluffy-telegram-r79rvrrrr4h6gw-80.app.github.dev/doan-phpcoban','1104723attiia','resetPassword','/api/refresh-token','status','log','stopTokenRefreshTimer','json','register','clearError','validateEmail','forgotPassword','exports','refreshToken','getElementById','classList','refreshTokenPromise','call','refreshTimeoutId','Bearer\x20','Token\x20refreshed.\x20Retrying\x20the\x20original\x20request...','accessToken','location','getItem','replace','POST','/login','message','slice','textContent','isPhone','post','/api/logout','/api/activate','displayError','/api/check-phone-number','now','scheduleNextTokenRefresh','5136942UrjXmL','3380302BwhIXp','7053000KrFTDu','data','addEventListener','remove','/api/login','14rbjAvZ','email','/api/register','then','fetchWithAuth','/api/forgot-password','Authorization','logout','checkEmailExists','expires_in','1388880iPbTSw','/api/reset-password','test','startsWith','btn-logout','Lỗi\x20khi\x20gọi\x20API\x20logout:','11040003wfXmmW','+84','append','removeItem','login','access_token','10421760yMApLc','headers','click','phone_number','exists','prototype','add'];a6_0x5098=function(){return _0x23588f;};return a6_0x5098();}function a6_0x2f96(_0xd763ed,_0x2487ae){const _0x5098fa=a6_0x5098();return a6_0x2f96=function(_0x2f9654,_0x8eb1b4){_0x2f9654=_0x2f9654-0xed;let _0x2f37b8=_0x5098fa[_0x2f9654];return _0x2f37b8;},a6_0x2f96(_0xd763ed,_0x2487ae);}(function(_0x365454,_0x3b9a09){const _0x4a3142=a6_0x2f96,_0x2c234b=_0x365454();while(!![]){try{const _0x4743a3=-parseInt(_0x4a3142(0x133))/0x1+-parseInt(_0x4a3142(0x123))/0x2+parseInt(_0x4a3142(0xfd))/0x3*(parseInt(_0x4a3142(0xf8))/0x4)+parseInt(_0x4a3142(0x124))/0x5+-parseInt(_0x4a3142(0x122))/0x6*(-parseInt(_0x4a3142(0x129))/0x7)+parseInt(_0x4a3142(0x13f))/0x8+-parseInt(_0x4a3142(0x139))/0x9;if(_0x4743a3===_0x3b9a09)break;else _0x2c234b['push'](_0x2c234b['shift']());}catch(_0x2ed6ee){_0x2c234b['push'](_0x2c234b['shift']());}}}(a6_0x5098,0xd1162),((()=>{'use strict';const _0x294eda=a6_0x2f96;var _0x4b3419={0x31:(_0x17535c,_0x127869,_0x8fe253)=>{const _0x109188=a6_0x2f96;_0x8fe253['d'](_0x127869,{'M':()=>_0x57a9d9});var _0x8a96eb=_0x8fe253(0x1ae);class _0x57a9d9{static[_0x109188(0x106)](_0x1281b0){const _0x313169=_0x109188;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/[_0x313169(0x135)](_0x1281b0);}static[_0x109188(0x11a)](_0x49a53d){const _0xf0c044=_0x109188;let _0x508031=_0x49a53d[_0xf0c044(0x114)](/[^0-9+]/g,'');return _0x508031[_0xf0c044(0x136)](_0xf0c044(0x13a))&&(_0x508031='0'+_0x508031[_0xf0c044(0x118)](0x3)),/^(0)(3[2-9]|5[689]|7[06-9]|8[1-689]|9[0-46-9])[0-9]{7}$/['test'](_0x508031);}static['displayError'](_0x18e9c0,_0x33f749){const _0x47b1b1=_0x109188,_0x133248=document['querySelector']('.error-log[data-field=\x22'+_0x18e9c0+'\x22]');_0x133248&&(''===_0x33f749?_0x133248[_0x47b1b1(0x10b)][_0x47b1b1(0xf2)](_0x47b1b1(0xfb)):_0x133248['classList'][_0x47b1b1(0x127)]('hidden'),_0x133248[_0x47b1b1(0x119)]=_0x33f749);}static[_0x109188(0x105)](_0x3efd85){const _0x3ea5b7=_0x109188;this[_0x3ea5b7(0x11e)](_0x3efd85,'');}static['redirect'](_0x333e40=''){const _0x174468=_0x109188;window[_0x174468(0x112)]['href']=''+_0x8a96eb['c']+_0x333e40;}}},0x1ae:(_0x2b355b,_0x24dd10,_0x1da0c2)=>{const _0x5c30e1=a6_0x2f96;_0x1da0c2['d'](_0x24dd10,{'c':()=>_0x25c213});const _0x25c213=_0x5c30e1(0xfc);},0x2d0:(_0x4a0d54,_0x39c0a1,_0x10de4b)=>{const _0x38b5fd=a6_0x2f96;_0x10de4b['d'](_0x39c0a1,{'y':()=>_0x174413});var _0x514811=_0x10de4b(0x1ae),_0x5e3666=_0x10de4b(0x31);const _0x174413=new class{['accessToken']=null;[_0x38b5fd(0x10c)]=null;['refreshTimeoutId']=null;constructor(){const _0x5b908e=_0x38b5fd;this[_0x5b908e(0x111)]=localStorage[_0x5b908e(0x113)](_0x5b908e(0x13e)),this[_0x5b908e(0x121)]();}async[_0x38b5fd(0x131)](_0x490340){const _0x2679a2=_0x38b5fd,_0x70f440=new FormData();_0x70f440[_0x2679a2(0x13b)](_0x2679a2(0x12a),_0x490340);const _0x116187=_0x514811['c']+'/api/check-email';try{const _0x76090c=await fetch(_0x116187,{'method':_0x2679a2(0x11b),'body':_0x70f440})[_0x2679a2(0x12c)](_0x583035=>_0x583035['json']());return!!_0x76090c[_0x2679a2(0xf5)]&&_0x76090c[_0x2679a2(0x125)]['exists'];}catch(_0x5bed42){console[_0x2679a2(0xf7)](_0x5bed42);}}async[_0x38b5fd(0xf9)](_0x3f0389){const _0x527446=_0x38b5fd,_0x314e97=new FormData();_0x314e97[_0x527446(0x13b)](_0x527446(0xef),_0x3f0389);const _0x1d29b3=_0x514811['c']+_0x527446(0x11f);try{const _0x4e4d93=await fetch(_0x1d29b3,{'method':'post','body':_0x314e97})[_0x527446(0x12c)](_0x127c24=>_0x127c24[_0x527446(0x103)]());return!!_0x4e4d93[_0x527446(0xf5)]&&_0x4e4d93[_0x527446(0x125)][_0x527446(0xf0)];}catch(_0x5e5e60){console[_0x527446(0xf7)](_0x5e5e60);}}['isLoggedIn'](){const _0x1ae8be=_0x38b5fd;return null!==this[_0x1ae8be(0x111)];}async[_0x38b5fd(0x104)](_0x46dd30){const _0x5cc0f5=_0x38b5fd,_0x5ec849=_0x514811['c']+_0x5cc0f5(0x12b);return await fetch(_0x5ec849,{'method':_0x5cc0f5(0x11b),'body':_0x46dd30})[_0x5cc0f5(0x12c)](_0x298903=>_0x298903[_0x5cc0f5(0x103)]());}async['activateAccount'](_0x195084){const _0x22bb23=_0x38b5fd,_0x882cab=_0x514811['c']+_0x22bb23(0x11d);return await fetch(_0x882cab,{'method':'post','body':_0x195084})[_0x22bb23(0x12c)](_0x38848d=>_0x38848d['json']());}async[_0x38b5fd(0x13d)](_0x45af6a){const _0x26d39d=_0x38b5fd,_0x271604=_0x514811['c']+_0x26d39d(0x128),_0x6d1b75=await fetch(_0x271604,{'method':'post','body':_0x45af6a})['then'](_0x520623=>_0x520623[_0x26d39d(0x103)]());return _0x6d1b75['success']&&(this[_0x26d39d(0x111)]=_0x6d1b75['data'][_0x26d39d(0x13e)],localStorage[_0x26d39d(0xf6)]('access_token',_0x6d1b75[_0x26d39d(0x125)][_0x26d39d(0x13e)]),localStorage[_0x26d39d(0xf6)](_0x26d39d(0xf4),String(_0x6d1b75[_0x26d39d(0x125)][_0x26d39d(0x132)]))),_0x6d1b75;}async[_0x38b5fd(0x107)](_0x47de2d){const _0x2aadd5=_0x38b5fd,_0x22e027=_0x514811['c']+_0x2aadd5(0x12e);return await fetch(_0x22e027,{'method':_0x2aadd5(0x11b),'body':_0x47de2d})['then'](_0x16ba6e=>_0x16ba6e['json']());}async[_0x38b5fd(0xfe)](_0x34efb1){const _0x193759=_0x38b5fd,_0x5b0aa6=_0x514811['c']+_0x193759(0x134);return await fetch(_0x5b0aa6,{'method':_0x193759(0x11b),'body':_0x34efb1})[_0x193759(0x12c)](_0x999789=>_0x999789[_0x193759(0x103)]());}async['logout'](){const _0x62f0ae=_0x38b5fd,_0x4f991d=this['accessToken'];this[_0x62f0ae(0x111)]=null,this[_0x62f0ae(0x102)](),localStorage[_0x62f0ae(0x13c)]('access_token'),localStorage[_0x62f0ae(0x13c)](_0x62f0ae(0xf4));try{const _0x323e7a=_0x514811['c']+_0x62f0ae(0x11c);await fetch(_0x323e7a,{'method':_0x62f0ae(0x11b),'headers':{'Authorization':_0x62f0ae(0x10f)+_0x4f991d}})[_0x62f0ae(0x12c)](_0x3fca30=>_0x3fca30[_0x62f0ae(0x103)]());}catch(_0x4732b0){console[_0x62f0ae(0xf7)](_0x62f0ae(0x138),_0x4732b0);}_0x5e3666['M']['redirect'](_0x62f0ae(0x116));}async[_0x38b5fd(0x12d)](_0x5384a6,_0x2b8c4e={}){const _0x18b068=_0x38b5fd,_0x3d9e67=this[_0x18b068(0x111)],_0x11750f=new Headers(_0x2b8c4e[_0x18b068(0xed)]||{});_0x3d9e67&&_0x11750f['set']('Authorization',_0x18b068(0x10f)+_0x3d9e67),_0x2b8c4e[_0x18b068(0xed)]=_0x11750f;let _0x677884=await fetch(_0x5384a6,_0x2b8c4e);if(0x191===_0x677884[_0x18b068(0x100)])try{const _0x591c89=await this[_0x18b068(0x109)]();_0x11750f['set'](_0x18b068(0x12f),_0x18b068(0x10f)+_0x591c89),_0x2b8c4e[_0x18b068(0xed)]=_0x11750f,console[_0x18b068(0x101)](_0x18b068(0x110)),_0x677884=await fetch(_0x5384a6,_0x2b8c4e);}catch(_0x15004a){console[_0x18b068(0xf7)]('Lấy\x20token\x20thất\x20bại.\x20Đăng\x20xuất.',_0x15004a),this[_0x18b068(0x130)](),_0x5e3666['M']['redirect']('/login');}return _0x677884;}async[_0x38b5fd(0x109)](){const _0x19afda=_0x38b5fd;if(!this[_0x19afda(0x10c)]){const _0x35e0fe=_0x514811['c']+_0x19afda(0xff);this['refreshTokenPromise']=fetch(_0x35e0fe,{'method':_0x19afda(0x115)})[_0x19afda(0x12c)](async _0x354965=>{const _0x4d35bb=_0x19afda;if(!_0x354965['ok'])throw new Error('Refresh\x20token\x20không\x20hợp\x20lệ\x20hoặc\x20đã\x20hết\x20hạn.');const _0x288ece=await _0x354965[_0x4d35bb(0x103)]();if(_0x288ece['success'])return this[_0x4d35bb(0x111)]=_0x288ece[_0x4d35bb(0x125)]['access_token'],localStorage[_0x4d35bb(0xf6)](_0x4d35bb(0x13e),this[_0x4d35bb(0x111)]),localStorage['setItem'](_0x4d35bb(0xf4),String(_0x288ece['data']['expires_in'])),this[_0x4d35bb(0x121)](),this[_0x4d35bb(0x111)];throw new Error(_0x288ece[_0x4d35bb(0x117)]||'Đã\x20xảy\x20ra\x20lỗi\x20từ\x20refresh\x20token\x20API');})[_0x19afda(0xf3)](()=>{const _0x2e4c17=_0x19afda;this[_0x2e4c17(0x10c)]=null;});}return this['refreshTokenPromise'];}[_0x38b5fd(0x102)](){const _0x3aeb65=_0x38b5fd;this[_0x3aeb65(0x10e)]&&(clearTimeout(this[_0x3aeb65(0x10e)]),this['refreshTimeoutId']=null);}async[_0x38b5fd(0x121)](){const _0x4a427a=_0x38b5fd;this[_0x4a427a(0x102)]();const _0x3dc547=localStorage[_0x4a427a(0x113)](_0x4a427a(0xf4));if(!_0x3dc547)return;const _0x144d96=0x3e8*parseInt(_0x3dc547,0xa)-Date[_0x4a427a(0x120)]()-0xea60;if(_0x144d96>0x0)this[_0x4a427a(0x10e)]=setTimeout(async()=>{const _0x34add0=_0x4a427a;try{await this[_0x34add0(0x109)]();}catch(_0x4ad590){this[_0x34add0(0x130)]();}},_0x144d96);else try{await this[_0x4a427a(0x109)]();}catch(_0xc2aa30){this['logout']();}}}();}},_0x39716a={};function _0x16d745(_0x3df473){const _0x38cade=a6_0x2f96;var _0xd30f27=_0x39716a[_0x3df473];if(void 0x0!==_0xd30f27)return _0xd30f27['exports'];var _0x28f1a0=_0x39716a[_0x3df473]={'exports':{}};return _0x4b3419[_0x3df473](_0x28f1a0,_0x28f1a0[_0x38cade(0x108)],_0x16d745),_0x28f1a0[_0x38cade(0x108)];}_0x16d745['d']=(_0x11a95f,_0x35ae37)=>{const _0x3cd969=a6_0x2f96;for(var _0x58115a in _0x35ae37)_0x16d745['o'](_0x35ae37,_0x58115a)&&!_0x16d745['o'](_0x11a95f,_0x58115a)&&Object[_0x3cd969(0xfa)](_0x11a95f,_0x58115a,{'enumerable':!0x0,'get':_0x35ae37[_0x58115a]});},_0x16d745['o']=(_0x19416b,_0x527d32)=>Object[_0x294eda(0xf1)]['hasOwnProperty'][_0x294eda(0x10d)](_0x19416b,_0x527d32);var _0x4ed87e=_0x16d745(0x2d0);const _0x21ac52=document[_0x294eda(0x10a)](_0x294eda(0x137));_0x21ac52?.[_0x294eda(0x126)](_0x294eda(0xee),async()=>{await _0x4ed87e['y']['logout']();});})()));